// SPDX-License-Identifier: UNLICENSED

/* *
 * Copyright (c) 2021-2026 LI LI @ JINGTIAN & GONGCHENG.
 *
 * This WORK is licensed under ComBoox SoftWare License 1.0, a copy of which 
 * can be obtained at:
 *         [https://github.com/paul-lee-attorney/comboox]
 *
 * THIS WORK IS PROVIDED ON AN "AS IS" BASIS, WITHOUT 
 * WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED 
 * TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE. IN NO 
 * EVENT SHALL ANY CONTRIBUTOR BE LIABLE TO YOU FOR ANY DAMAGES.
 *
 * YOU ARE PROHIBITED FROM DEPLOYING THE SMART CONTRACTS OF THIS WORK, IN WHOLE 
 * OR IN PART, FOR WHATEVER PURPOSE, ON ANY BLOCKCHAIN NETWORK THAT HAS ONE OR 
 * MORE NODES THAT ARE OUT OF YOUR CONTROL.
 * */

pragma solidity ^0.8.24;


import "../books/roa/IRegisterOfAgreements.sol";
import "../books/roa/IInvestmentAgreement.sol";

import "../books/roc/terms/IAntiDilution.sol";
import "../books/roc/terms/IAlongs.sol";
import "../books/roc/IShareholdersAgreement.sol";

import "../books/rom/IRegisterOfMembers.sol";
import "../books/ros/IRegisterOfShares.sol";

import "../common/components/IFilesFolder.sol";
import "../common/components/ISigPage.sol";

import "../../lib/RulesParser.sol";
import "../../lib/SharesRepo.sol";
import "../../lib/DTClaims.sol";
import "../../lib/FRClaims.sol";
import "../../lib/DealsRepo.sol";
import "../../lib/InterfacesHub.sol";

/// @title ISHAKeeper
/// @notice Interface for SHA rights execution (along, anti-dilution, refusal).
interface ISHAKeeper {

    // ======== TagAlong & DragAlong ========

    /// @notice Execute drag-along or tag-along right.
    /// @param ia Investment agreement address.
    /// @param snOfClaim Serial number of the claim, encoded with claim head data.
    // / @param seqOfDeal Deal sequence.
    // / @param dragAlong True for drag-along, false for tag-along.
    // / @param seqOfShare Share sequence.
    // / @param paid Paid amount.
    // / @param par Par amount.
    /// @param sigHash Signature hash.
    function execAlongRight(
        address ia,
        bytes32 snOfClaim,
        // uint256 seqOfDeal,
        // bool dragAlong,
        // uint256 seqOfShare,
        // uint paid,
        // uint par,
        bytes32 sigHash
    ) external;

    /// @notice Accept an along deal.
    /// @param ia Investment agreement address.
    /// @param seqOfDeal Deal sequence.
    /// @param sigHash Signature hash.
    function acceptAlongDeal(
        address ia,
        uint256 seqOfDeal,
        bytes32 sigHash
    ) external;

    // ======== AntiDilution ========

    /// @notice Execute anti-dilution adjustment.
    /// @param ia Investment agreement address.
    /// @param seqOfDeal Deal sequence.
    /// @param seqOfShare Share sequence.
    /// @param sigHash Signature hash.
    function execAntiDilution(
        address ia,
        uint256 seqOfDeal,
        uint256 seqOfShare,
        bytes32 sigHash
    ) external;

    /// @notice Take gift shares generated by anti-dilution.
    /// @param ia Investment agreement address.
    /// @param seqOfDeal Deal sequence.
    function takeGiftShares(
        address ia,
        uint256 seqOfDeal
    ) external;

    // ======== FirstRefusal ========

    /// @notice Execute first refusal right.
    /// @param seqOfFRRule First refusal rule sequence.
    /// @param seqOfRightholder Rightholder sequence.
    /// @param ia Investment agreement address.
    /// @param seqOfDeal Deal sequence.
    /// @param sigHash Signature hash.
    function execFirstRefusal(
        uint256 seqOfFRRule,
        uint256 seqOfRightholder,
        address ia,
        uint256 seqOfDeal,
        bytes32 sigHash
    ) external;

    /// @notice Compute first refusal results.
    /// @param ia Investment agreement address.
    /// @param seqOfDeal Deal sequence.
    function computeFirstRefusal(
        address ia,
        uint256 seqOfDeal
    ) external;
}
